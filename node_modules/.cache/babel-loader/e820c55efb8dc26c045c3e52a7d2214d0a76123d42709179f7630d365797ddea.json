{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport TreeMenu from \"@/views/TreeMenu\";\nexport default {\n  name: \"SideBar\",\n  // 引入子组件\n  components: {\n    TreeMenu: TreeMenu\n  },\n  data: function data() {\n    return {\n      defaultActive: \"首页\",\n      //关键 当前激活菜单的 index\n      userId: JSON.parse(localStorage.getItem(\"userId\")),\n      menus: localStorage.getItem(\"menu\") ? JSON.parse(localStorage.getItem(\"menu\")) : ''\n    };\n  },\n  methods: {\n    getPermissionByUserId: function getPermissionByUserId() {\n      var _this = this;\n      this.$store.dispatch('GetPermissionByUserId', this.userId).then(function (res) {\n        // 拿到结果\n        var statusCode = res.data.statusCode;\n        _this.menus = res.data.data;\n        // 判断结果\n        if (statusCode == 200) {\n          console.log(\"获取权限成功\");\n        } else {\n          console.log(\"获取权限错误\");\n        }\n      }).catch(function () {\n        _this.loading = false;\n      });\n    },\n    setCurrentRoute: function setCurrentRoute() {\n      //关键   通过他就可以监听到当前路由状态并激活当前菜单\n      this.defaultActive = this.$route.name;\n    }\n  },\n  // 解决了 刷新页面保持当前菜单选中项及路由\n  watch: {\n    $route: function $route() {\n      this.setCurrentRoute();\n    }\n  },\n  created: function created() {\n    this.setCurrentRoute();\n  },\n  // 页面加载时触发函数\n  mounted: function mounted() {\n    if (this.userId) {\n      this.getPermissionByUserId();\n    }\n  }\n};","map":{"version":3,"mappings":";AAcA;AAEA;EACAA;EACA;EACAC;IAAAC;EAAA;EAEAC;IACA;MACAC;MAAA;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MAAA;MACA;QACA;QACA;QACA;QACA;QACA;UACAC;QACA;UACAA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;IACA;EACA;EAEA;EACAC;IACAC;MACA;IACA;EACA;EACAC;IACA;EACA;EACA;EACAC;IACA;MACA;IACA;EACA;AACA","names":["name","components","TreeMenu","data","defaultActive","userId","menus","methods","getPermissionByUserId","console","setCurrentRoute","watch","$route","created","mounted"],"sourceRoot":"src/views","sources":["SideBar.vue"],"sourcesContent":["<template>\r\n  <nav id=\"nav\">\r\n    <div id=\"navTitle\">广西永湘物流公司</div>\r\n    <!-- 默认激活的是 首页 -->\r\n      <el-menu id =\"menu\" :default-active=\"defaultActive\">\r\n        <ul v-for=\"menu in menus\" :key=\"menu.name\">\r\n          <tree-menu :menu=\"menu\" :key=\"menu.name\"></tree-menu>\r\n        </ul>\r\n      </el-menu>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\n\r\nimport TreeMenu from \"@/views/TreeMenu\";\r\n\r\nexport default {\r\n  name: \"SideBar\",\r\n  // 引入子组件\r\n  components: {TreeMenu},\r\n\r\n  data() {\r\n    return {\r\n      defaultActive: \"首页\", //关键 当前激活菜单的 index\r\n      userId:JSON.parse(localStorage.getItem(\"userId\")),\r\n      menus:localStorage.getItem(\"menu\") ? JSON.parse(localStorage.getItem(\"menu\")):''\r\n    }\r\n  },\r\n  methods: {\r\n    getPermissionByUserId(){\r\n      this.$store.dispatch('GetPermissionByUserId',this.userId).then((res) => {\r\n        // 拿到结果\r\n        let statusCode = res.data.statusCode\r\n        this.menus=res.data.data\r\n        // 判断结果\r\n          if (statusCode==200) {\r\n            console.log(\"获取权限成功\")\r\n          } else {\r\n            console.log(\"获取权限错误\")\r\n          }\r\n      }).catch(() => {\r\n        this.loading = false\r\n      })\r\n    },\r\n    setCurrentRoute () {\r\n      //关键   通过他就可以监听到当前路由状态并激活当前菜单\r\n      this.defaultActive = this.$route.name \r\n    }\r\n  },\r\n\r\n  // 解决了 刷新页面保持当前菜单选中项及路由\r\n  watch: {\r\n    $route () {\r\n      this.setCurrentRoute()\r\n    }\r\n  },\r\n  created () {\r\n    this.setCurrentRoute()\r\n  },\r\n  // 页面加载时触发函数\r\n  mounted:function(){ \r\n    if(this.userId){\r\n      this.getPermissionByUserId()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n#nav {\r\n  z-index: 1000;\r\n  min-width: 250px;\r\n  height:100%;\r\n  background-color: rgb(255, 253, 253);\r\n  left: 0;\r\n  top: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 250px;\r\n  position: absolute;\r\n  border-right: 1px solid #e3e3e3;\r\n}\r\n\r\n#nav #menu{\r\n    /*只是y方向*/\r\n  overflow-y: scroll;\r\n}\r\n\r\n#nav #navTitle{\r\n  font-size: 20px;\r\n  height: 50px;\r\n  min-height: 50px;\r\n  line-height: 50px;\r\n  font-weight: 600;\r\n  width: 100%;\r\n  text-align: center;\r\n  color: white;\r\n  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.49);\r\n  background-color: #009688;\r\n}\r\n\r\n\r\n/* li {\r\n  border-bottom: 0.1em solid #E5E5E5;\r\n} */\r\n\r\n/* \r\nli {\r\n  list-style: none;\r\n  position: relative;\r\n  border-style: solid;\r\n  border-width: 1px 0 0;\r\n  border-color: #E5E5E5;\r\n}\r\n\r\n.submenu > li {\r\n  position: relative;\r\n}\r\n\r\n\r\n.submenu > li a{\r\n  padding-left: 45px;\r\n}\r\na {\r\n  display: block;\r\n  width: 189px;\r\n  height: 36px;\r\n  color: #5d5d5d;\r\n  text-decoration: none;\r\n  line-height: 36px;\r\n}\r\n\r\n.submenuHide {\r\n  display: none;\r\n  position: relative;\r\n}\r\n\r\n.submenuShow {\r\n  display: block;\r\n  position: relative;\r\n}\r\n\r\n.submenu:before {\r\n  content: \"\";\r\n  display: block;\r\n  position: absolute;\r\n  z-index: 1;\r\n  left: 15px;\r\n  top: 37px;\r\n  bottom: 0;\r\n  border: 1px dotted;\r\n  border-width: 0 0 0 1px; \r\n}\r\n\r\n.submenu > li:before {\r\n  content: \"\";\r\n  display: block;\r\n  width: 10px;\r\n  position: absolute;\r\n  z-index: 1;\r\n  left: 20px;\r\n  top: 17px;\r\n  border: 1px dotted;\r\n  border-width: 1px 0 0; \r\n} */\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}