{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport { login } from '@/api/loginApi'; //引入登录 api 接口\nimport { getToken } from '@/utils/auth';\nvar loginVo = {\n  state: {\n    userId: '',\n    loginToken: '' // 用户token，用户确认当前用户是否登录\n  },\n\n  getters: {\n    userId: function userId(state) {\n      var userId = state.userId;\n      if (!userId) {\n        userId = JSON.parse(window.sessionStorage.getItem('userId'));\n      }\n      return userId;\n    },\n    userToken: function userToken(state) {\n      var userToken = state.userToken;\n      if (!userToken) {\n        userToken = JSON.parse(window.sessionStorage.getItem('userToken'));\n      }\n      return userToken;\n    }\n  },\n  actions: {\n    // 登录\n    Login: function Login(_ref, loginInfo) {\n      var commit = _ref.commit;\n      //定义 Login 方法，在组件中使用 this.$store.dispatch(\"Login\") 调用\n      return new Promise(function (resolve, reject) {\n        //封装一个 Promise\n        login(loginInfo).then(function (response) {\n          //使用 login 接口进行网络请求\n          var user = JSON.stringify(response.data.data);\n          commit('updateLoginVo', user);\n          localStorage.setItem(\"userId\", JSON.stringify(response.data.data.userId));\n          localStorage.setItem(\"loginToken\", JSON.stringify(response.data.data.loginToken));\n          // localStorage.setItem(\"loginToken\",JSON.stringify(response.data.data.loginToken))\n          resolve(response); //将结果封装进 Promise\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    }\n  }\n};\nexport default loginVo;","map":{"version":3,"names":["login","getToken","loginVo","state","userId","loginToken","getters","JSON","parse","window","sessionStorage","getItem","userToken","actions","Login","loginInfo","commit","Promise","resolve","reject","then","response","user","stringify","data","localStorage","setItem","catch","error"],"sources":["D:/program/LanqiaoVue/vue-demo/src/store/modules/login.js"],"sourcesContent":["import { login } from '@/api/loginApi'//引入登录 api 接口\r\nimport { getToken } from '@/utils/auth'\r\n\r\n\r\nconst loginVo={\r\n    state: {\r\n        userId: '',\r\n        loginToken: '',  // 用户token，用户确认当前用户是否登录\r\n    },\r\n    getters: {\r\n        userId: state => {\r\n            let userId = state.userId;\r\n            if(!userId){\r\n                userId =  JSON.parse(window.sessionStorage.getItem('userId'));\r\n            }\r\n            return userId;\r\n        },\r\n        userToken: state => {\r\n            let userToken = state.userToken;\r\n            if(!userToken){\r\n                userToken = JSON.parse(window.sessionStorage.getItem('userToken'));\r\n            }\r\n            return userToken;\r\n        },\r\n    },\r\n\r\n    actions:{\r\n        // 登录\r\n        Login({ commit }, loginInfo) { //定义 Login 方法，在组件中使用 this.$store.dispatch(\"Login\") 调用\r\n            return new Promise((resolve, reject) => { //封装一个 Promise\r\n            login(loginInfo).then(response => { //使用 login 接口进行网络请求\r\n                var user=JSON.stringify(response.data.data)\r\n                commit('updateLoginVo',user)\r\n                localStorage.setItem(\"userId\",JSON.stringify(response.data.data.userId))\r\n                localStorage.setItem(\"loginToken\",JSON.stringify(response.data.data.loginToken))\r\n                // localStorage.setItem(\"loginToken\",JSON.stringify(response.data.data.loginToken))\r\n                resolve(response) //将结果封装进 Promise\r\n            }).catch(error => {\r\n                reject(error)\r\n            })\r\n            })\r\n        },\r\n    }\r\n}\r\n\r\nexport default loginVo"],"mappings":";;AAAA,SAASA,KAAK,QAAQ,gBAAgB;AACtC,SAASC,QAAQ,QAAQ,cAAc;AAGvC,IAAMC,OAAO,GAAC;EACVC,KAAK,EAAE;IACHC,MAAM,EAAE,EAAE;IACVC,UAAU,EAAE,EAAE,CAAG;EACrB,CAAC;;EACDC,OAAO,EAAE;IACLF,MAAM,EAAE,gBAAAD,KAAK,EAAI;MACb,IAAIC,MAAM,GAAGD,KAAK,CAACC,MAAM;MACzB,IAAG,CAACA,MAAM,EAAC;QACPA,MAAM,GAAIG,IAAI,CAACC,KAAK,CAACC,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,QAAQ,CAAC,CAAC;MACjE;MACA,OAAOP,MAAM;IACjB,CAAC;IACDQ,SAAS,EAAE,mBAAAT,KAAK,EAAI;MAChB,IAAIS,SAAS,GAAGT,KAAK,CAACS,SAAS;MAC/B,IAAG,CAACA,SAAS,EAAC;QACVA,SAAS,GAAGL,IAAI,CAACC,KAAK,CAACC,MAAM,CAACC,cAAc,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC;MACtE;MACA,OAAOC,SAAS;IACpB;EACJ,CAAC;EAEDC,OAAO,EAAC;IACJ;IACAC,KAAK,uBAAaC,SAAS,EAAE;MAAA,IAArBC,MAAM,QAANA,MAAM;MAAiB;MAC3B,OAAO,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;QAAE;QAC1CnB,KAAK,CAACe,SAAS,CAAC,CAACK,IAAI,CAAC,UAAAC,QAAQ,EAAI;UAAE;UAChC,IAAIC,IAAI,GAACf,IAAI,CAACgB,SAAS,CAACF,QAAQ,CAACG,IAAI,CAACA,IAAI,CAAC;UAC3CR,MAAM,CAAC,eAAe,EAACM,IAAI,CAAC;UAC5BG,YAAY,CAACC,OAAO,CAAC,QAAQ,EAACnB,IAAI,CAACgB,SAAS,CAACF,QAAQ,CAACG,IAAI,CAACA,IAAI,CAACpB,MAAM,CAAC,CAAC;UACxEqB,YAAY,CAACC,OAAO,CAAC,YAAY,EAACnB,IAAI,CAACgB,SAAS,CAACF,QAAQ,CAACG,IAAI,CAACA,IAAI,CAACnB,UAAU,CAAC,CAAC;UAChF;UACAa,OAAO,CAACG,QAAQ,CAAC,EAAC;QACtB,CAAC,CAAC,CAACM,KAAK,CAAC,UAAAC,KAAK,EAAI;UACdT,MAAM,CAACS,KAAK,CAAC;QACjB,CAAC,CAAC;MACF,CAAC,CAAC;IACN;EACJ;AACJ,CAAC;AAED,eAAe1B,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}